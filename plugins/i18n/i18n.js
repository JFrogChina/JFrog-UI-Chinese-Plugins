
var config = config || {

    "autoTranslate" : false,
    "autoTarget" : "中文",
    "manualClassName" : "help-container",
    "manualTargetList" : ["En", "Fr", "De", "日本语", "中文"],
    "current" : "En",

    "En": {
    },
    "Fr": {
        "Welcome" : "Bienvenue",
        "Happily serving" : "Servir joyeusement",
        "Filter by" : "Filtrer par",
        "Sort by" : "Trier par",
        "My Favorites" : "Mes favoris",
        "Tree View" : "Arborescence",
        "Set Me Up" : "Prépare-moi",
    
        "Application" : "Candidature",
    
        "Dashboard" : "Tableau de bord",
        "Topology" : "Topologie",
        "Trends" : "Tendances",
    
        "Artifactory" : "Artificielle",
        "Packages" : "Forfaits",
        "Builds" : "Builds",
        "Artifacts" : "Artefacts",
        "artifacts" : "artefacts",
        
        "Distribution" : "Répartition",
    
        "Pipelines" : "Canalisations",
        "My Pipelines" : "Mes Pipelines",
        "Integrations" : "Intégrations",
        "Pipeline Sources" : "Sources de pipelines",
        "Node Pools" : "Pools de nœuds",
        "Extensions & Templates" : "Extensions & Modèles",
    
        "Security & Compliance" : "Sécurité & Conformité",
        "Watch Violations" : "Regarder les violations",
        "Report" : "Rapport",
    
        "General" : "Général",
        "Package Information" : "Informations sur le paquet",
        "Info" : "Informations",
        "Name" : "Nom",
        "Repository Path" : "Chemin du référentiel",
        "Module ID": "Identifiant du module",
        "URL to file" : "URL du fichier",
        "Deployed By" : "Publié par",
        "Deploy" : "Déployer",
        "Size" : "Taille",
        "Created" : "Temps créé",
        "Last Modified" : "Dernière modification",
        "Remote Downloads" : "Téléchargements à distance",
        "Downloads" : "Téléchargements",
        "Last Downloaded By" : "Dernier téléchargement par",
        "Last Downloaded" : "Dernier téléchargement",
        "Filtered" : "Filtré",
        "Virtual Repository Associations" : "Référentiels Virtuels Associés",
        "Included Repositories" : "Référentiels inclus",
        "Checksums" : "Sommes de contrôle",
        "Dependency Declaration" : "Déclaration de dépendance",
        "Build Tool" : "Outil de construction",
    
        "Violations" : "Violations",
        "Security" : "Sécurité",
        "Licenses" : "Licences",
        "Descendants" : "Enfants",
        "Ancestors" : "Parent",
        "Actions" : "Actions",
        "Violation Status" : "Statut de violation",
        "Summary" : "Résumé",
        "Severity" : "Gravité",
        "Watch Name" : "Nom de la montre",
        "Type" : "Type",
        "Component" : "Composant",
        "Policies" : "Politiques",
    
        "Effective Permissions" : "Autorisations effectives",
        "Properties" : "Propriétés",
        "Followers" : "Abonnés",
    
        "Administration" : "Gestion",
        "Projects" : "Projets",
        "Repositories" : "Dépôts",
        "Layouts" : "Mises en page",
        "Identity and Access" : "Identité et Authentification",
        "Users" : "Utilisateurs",
        "Groups" : "Groupes d'utilisateurs",
        "Global Roles" : "Rôles globaux",
        "Permissions" : "Autorisations",
        "Access Tokens" : "Jetons d'accès",
        "Settings" : "Paramètres",
        "License" : "Licence",
        "Mail Server" : "Serveur de courrier",
        "Proxies" : "Proxys",
        "Configuration" : "Configuration",
        "Monitoring" : "Surveillance",
        "Storage" : "Stockage",
        "Service Status" : "État du service",
        "System Logs" : "Journaux système",
        "Support Zone" : "Zone d'assistance",
        "SERVICES" : "Services"
    },
    "De": {
        "Welcome" : "欢迎"
    },
    "日本语": {
        "Welcome" : "ようこそ",
        "Happily serving" : "喜んでお召し上がりいただけます",
        "Filter by" : "フィルタリング",
        "Sort by" : "並び替え",
        "My Favorites" : "私のお気に入り",
        "Tree View" : "ツリー表示",
        "Set Me Up" : "セットアップ",
    
        "Application" : "応用",
    
        "Dashboard" : "ダッシュボード",
        "Topology" : "トポロジー",
        "Trends" : "トレンド",
    
        "Artifactory" : "アーティファクトリー",
        "Packages" : "パッケージ",
        "Builds" : "ビルド",
        "Artifacts" : "アーティファクト",
        "artifacts" : "アーティファクト",
        
        "Distribution" : "分布",
    
        "Pipelines" : "パイプライン",
        "My Pipelines" : "私のパイプライン",
        "Integrations" : "統合",
        "Pipeline Sources" : "パイプラインソース",
        "Node Pools" : "ノードプール",
        "Extensions & Templates" : "拡張機能とテンプレート",
    
        "Security & Compliance" : "セキュリティとコンプライアンス",
        "Watch Violations" : "違反を見る",
        "Report" : "Report",
    
        "General" : "全般的",
        "Package Information" : "パッケージ情報",
        "Info" : "情報",
        "Name" : "名前",
        "Repository Path" : "リポジトリパス",
        "URL to file" : "ファイルへのURL",
        "Module ID": "モジュールID",
        "Deployed By" : "展開者",
        "Deploy" : "配備",
        "Size" : "サイズ",
        "Created" : "作成した",
        "Last Modified" : "最終更新日",
        "Remote Downloads" : "リモートダウンロード",
        "Downloads" : "ダウンロード",
        "Last Downloaded By" : "最終ダウンロード者",
        "Last Downloaded" : "最終ダウンロード",
        "Filtered" : "フィルタリング",
        "Virtual Repository Associations" : "仮想リポジトリの関連付け",
        "Included Repositories" : "含まれるリポジトリ",
        "Checksums" : "チェックサム",
        "Dependency Declaration" : "依存関係の宣言",
        "Build Tool" : "ビルドツール",
    
        "Violations" : "違反",
        "Security" : "安全",
        "Licenses" : "ライセンス",
        "Descendants" : "子孫",
        "Ancestors" : "祖先",
        "Actions" : "行動",
        "Violation Status" : "違反状況",
        "Summary" : "概要",
        "Severity" : "重大度",
        "Watch Name" : "時計名",
        "Type" : "タイプ",
        "Component" : "成分",
        "Policies" : "ポリシー",
    
        "Effective Permissions" : "有効な権限",
        "Properties" : "プロパティ",
        "Followers" : "フォロワー",
    
        "Administration" : "管理",
        "Projects" : "プロジェクト",
        "Repositories" : "リポジトリ",
        "Layouts" : "レイアウト",
        "Identity and Access" : "アイデンティティとアクセス",
        "Users" : "ユーザー",
        "Groups" : "グループ",
        "Global Roles" : "グローバルな役割",
        "Permissions" : "権限",
        "Access Tokens" : "アクセストークン",
        "Settings" : "設定",
        "License" : "ライセンス",
        "Mail Server" : "メールサーバー",
        "Proxies" : "プロキシ",
        "Configuration" : "構成",
        "Monitoring" : "モニタリング",
        "Storage" : "保管所",
        "Service Status" : "サービスステータス",
        "System Logs" : "システムログ",
        "Support Zone" : "サポートゾーン",
        "SERVICES" : "サービス"
    },
    "中文": {
        "Welcome" : "欢迎",
        "Happily serving" : "正在管理",
        "Filter by" : "过滤条件",
        "Sort by" : "排序",
        "My Favorites" : "我的收藏",
        "Tree View" : "树形视图",
        "Set Me Up" : "设置指引",
    
        "Application" : "应用",
    
        "Dashboard" : "工作台",
        "Topology" : "拓扑",
        "Trends" : "趋势",
    
        "Artifactory" : "制品库",
        "Packages" : "包",
        "Builds" : "构建",
        "Artifacts" : "制品",
        "artifacts" : "制品",
        
        "Distribution" : "分发",
    
        "Pipelines" : "流水线",
        "My Pipelines" : "我的流水线",
        "Integrations" : "集成",
        "Pipeline Sources" : "流水线资源",
        "Node Pools" : "节点池",
        "Extensions & Templates" : "扩展 & 模版",
    
        "Security & Compliance" : "安全 & 合规",
        "Watch Violations" : "监控违反",
        "Report" : "报告",
    
        "General" : "通用",
        "Package Information" : "包信息",
        "Info" : "信息",
        "Name" : "名称",
        "Repository Path" : "仓库路径",
        "URL to file" : "文件 URL",
        "Module ID" : "模块编号",
        "Deployed By" : "发布人",
        "Deploy" : "部署",
        "Size" : "大小",
        "Created" : "创建时间",
        "Last Modified" : "最后修改时间",
        "Remote Downloads" : "远程下载次数",
        "Downloads" : "下载次数",
        "Last Downloaded By" : "最后下载人",
        "Last Downloaded" : "最后下载时间",
        "Filtered" : "过滤的",
        "Virtual Repository Associations" : "关联的虚拟仓库",
        "Included Repositories" : "包含的仓库",
        "Checksums" : "校验值",
        "Dependency Declaration" : "依赖声明",
        "Build Tool" : "构建工具",
    
        "Violations" : "违反",
        "Security" : "安全",
        "Licenses" : "许可证",
        "Descendants" : "子级",
        "Ancestors" : "父级",
        "Actions" : "操作",
        "Violation Status" : "违反状态",
        "Summary" : "总览",
        "Severity" : "严重性",
        "Watch Name" : "监控名称",
        "Type" : "类型",
        "Component" : "组件",
        "Policies" : "策略",
    
        "Effective Permissions" : "生效的权限",
        "Properties" : "属性",
        "Followers" : "关注者",
    
        "Administration" : "管理",
        "Projects" : "项目",
        "Repositories" : "仓库",
        "Layouts" : "布局",
        "Identity and Access" : "身份和认证",
        "Users" : "用户",
        "Groups" : "用户组",
        "Global Roles" : "全局角色",
        "Permissions" : "权限",
        "Access Tokens" : "访问凭证",
        "Settings" : "设置",
        "License" : "许可证",
        "Mail Server" : "邮件服务器",
        "Proxies" : "代理",
        "Configuration" : "配置",
        "Monitoring" : "监控",
        "Storage" : "存储",
        "Service Status" : "服务状态",
        "System Logs" : "系统日志",
        "Support Zone" : "支持区域",
        "SERVICES" : "服务"
    }
}

function replaceInText(element, pattern, replacement) {
    for (let node of element.childNodes) {
        switch (node.nodeType) {
            case Node.ELEMENT_NODE:
                replaceInText(node, pattern, replacement);
                break;
            case Node.TEXT_NODE:
                node.textContent = node.textContent.replace(pattern, replacement);
                break;
            case Node.DOCUMENT_NODE:
                replaceInText(node, pattern, replacement);
        }
    }
}

// replaceInText(document.body, /Artifactory/g, '制品库');

function translate(target){

    let targetMap = config[target];
    let currentMap = config[config.current];

    if(!targetMap){
        console.log('target not found');
        return;
    }
    
    var i;
    // back to english
    for(i in currentMap){
        let regex;
        
        let key = currentMap[i];
        let value = i;

        regex = new RegExp('' + key + '', 'g');
        replaceInText(document.body, regex, value);
    }

    // to target
    if(target != 'En'){
        for(i in targetMap){
            let regex;
            
            // english -> chinese
            let key = i;
            let value = targetMap[i];

            regex = new RegExp('' + key + '', 'g');
            replaceInText(document.body, regex, value);
        }
    }

    config.current = target;

};

function addButton(className, text, func){

    let arr = document.getElementsByClassName(className);
    if(arr.length){
        let button = document.createElement('span');
        button.style.width = '50px';
        button.style.textAlign = 'center';
        let linkText = document.createTextNode(text);
        button.appendChild(linkText);
        button.addEventListener('click', func);
        arr[0].appendChild(button);
    }
    
}

function init(_config){

    if(_config.autoTranslate){

         // auto translation to 1 target
         setInterval(function() {
            translate(_config.autoTarget);
        }, 300);        

    } else {
       // manual translation by buttons

       for (let target of _config.manualTargetList) {
            if(config[target]){
                addButton(_config.manualClassName,  target, function(){ translate(target) });
            }
        }
    }
    
}


export { config, init };

   