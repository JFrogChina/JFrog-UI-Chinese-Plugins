# Override values for pipelines.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

pipelines:

  # if invalid https cert
  # error for https://demo.jfrogchina.com = Service registry ping failed, will retry. Error: connect ECONNREFUSED 127.0.0.1:8046
  # error for https://x.x.x.x = Cluster join: Retry 20: Service registry ping failed, will retry. Error: Get "https://x.x.x.x/access/api/v1/system/ping": x509: cannot validate certificate for x.x.x.x because it doesn't contain any IP SANs
  # error for http://demo.jfrogchina.com = ...
  # error for http://x.x.x.x:8082 = Cluster join: Retry 45: Service registry ping failed ... connection refused
  # works
  # jfrogUrl: http://x.x.x.x
  # jfrogUrlUI: http://x.x.x.x

  jfrogUrl: https://demo.jfrogchina.com
  jfrogUrlUI: https://demo.jfrogchina.com

  replicaCount: 1

  ## JFrog Pipelines API server
  api:

    ingress:
      enabled: true
      annotations:
        ## If NOT using letsencrypt, you can omit these two lines
        cert-manager.io/cluster-issuer: "letsencrypt-prod"
        kubernetes.io/tls-acme: "true"
        ## If NOT using letsencrypt, you can omit two lines above

        ingress.kubernetes.io/force-ssl-redirect: "true"
        ingress.kubernetes.io/proxy-body-size: "0"
        ingress.kubernetes.io/proxy-read-timeout: "600"
        ingress.kubernetes.io/proxy-send-timeout: "600"
        kubernetes.io/ingress.class: nginx
        nginx.ingress.kubernetes.io/proxy-body-size: "0"

        ## Set a custom whitelist IP CIDRs. Comma delimited.
        # nginx.ingress.kubernetes.io/whitelist-source-range: "1.2.3.4/32,2.3.4.5/32"
      
      # example 1
      # path: /
      # hosts:
      #   - pipelines-api.jfrogchina.com
      # tls:
      #   - secretName: pipelines-api.jfrogchina.com
      #     hosts:
      #       - pipelines-api.jfrogchina.com

      # example 2
      path: /pipelines/api
      hosts:
        - demo.jfrogchina.com
      tls:
        - secretName: demo.jfrogchina.com
          hosts:
            - demo.jfrogchina.com
